apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
    name: '{{ if ne $.Values.telegraEnv "prod" }}{{ $.Values.telegraEnv }}-{{ end }}frontend-affiliate-admin-v2-public'
    annotations:
        alb.ingress.kubernetes.io/scheme: internet-facing
        alb.ingress.kubernetes.io/target-type: ip
        alb.ingress.kubernetes.io/certificate-arn: {{ join "," .Values.aws.certificates }}
        alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 80}, {"HTTPS":443}]'
        alb.ingress.kubernetes.io/ssl-redirect: '443'
        alb.ingress.kubernetes.io/group.name: 'telegramd-affiliate-admin-v2-public'
spec:
    ingressClassName: alb
    rules:
        - host: '{{ if ne $.Values.telegraEnv "prod" }}{{ $.Values.telegraEnv }}-{{ end }}affiliate-admin-v2.{{ $.Values.domainName }}'
          http:
            paths:
              - path: /
                pathType: Prefix
                backend:
                  service:
                    name: {{ .Values.affiliateAdminV2Service.name }}-svc
                    port:
                      number: {{ .Values.affiliateAdminV2Service.externalPort }}
